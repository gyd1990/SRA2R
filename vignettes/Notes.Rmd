---
title: "Notes"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Getting started
Clone SRA2R Project from GitHub
```{r eval=FALSE}
file > New Project... > Version Control > Git > Repository URL: https://github.com/rosachoe/SRA2R.git
```

Set Project to SRA2R
```{r eval=FALSE}
install.packages("roxygen2")
### SRAdb
source("https://bioconductor.org/biocLite.R")
biocLite("SRAdb")

library(roxygen2)
library(devtools)
library(SRAdb)
load_all()
```

## Download/Load SQLite database
```{r eval=FALSE} 
if(file.exists('SRAmetadb.sqlite')) {
  sra_dbname = 'SRAmetadb.sqlite'
  sra_con = dbConnect(dbDriver("SQLite"), sra_dbname)
} else {
  getSRAdbFile(destdir = getwd(), destfile = "SRAmetadb.sqlite.qz", method)
}
```

## Isolating controlled access reads
In Terminal:
```{r eval=FALSE}
wget ftp://ftp-trace.ncbi.nlm.nih.gov/sra//reports/Metadata/SRA_Accessions.tab
```

In R:
```{r eval=FALSE}
cmd_cut = "cut -f 1,9 $PWD/SRA_Accessions.tab"
df = read.delim(pipe(cmd_cut))
private_df = df[df$Visibility == 'controlled_access',]
```

### Usage
```{r eval=FALSE} 
accs = getSRA(search_terms = "breast cancer homo sapiens", sra_con = sra_con, acc_only = TRUE)
accs = accs[!(accs$run %in% private_df$Accession),"run"]
```